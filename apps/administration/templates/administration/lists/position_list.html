{% extends 'administration/base_admin.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'administration/css/admin_lists.css' %}">
<link rel="stylesheet" href="{% static 'administration/css/lists/position_list.css' %}">
{% endblock %}

{% block content %}
<div class="admin-header-2">
    <h1 class="admin-title">Positions</h1>
    <div class="admin-actions">
        <a href="{% url 'administration:position_create' %}" class="btn-primary">
            <i class="fas fa-plus"></i> New Position
        </a>
    </div>
</div>

<!-- Search Bar -->
<div class="filter-bar">
    <div class="search-container">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="searchInput" class="search-input" placeholder="Search positions...">
    </div>
</div>
<div class="list-container"> 
<div class="table-container">
    <div class="table-scroll">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Order</th>
                    <th>Winners</th>
                    <th>Status</th>
                    <th class="text-right">Actions</th>
                </tr>
            </thead>
            <tbody id="positionsTable">
                {% for position in positions %}
                <tr class="data-row">
                    <td>
                        <div class="cell-flex">
                            <div class="cell-icon">
                                <i class="fas fa-chair"></i>
                            </div>
                            <span class="cell-text-primary">{{ position.name }}</span>
                        </div>
                    </td>
                    <td>{{ position.order_on_ballot }}</td>
                    <td>{{ position.number_of_winners }}</td>
                    <td>
                        {% if position.is_active %}
                        <span class="badge badge-green">
                            <i class="fas fa-check-circle"></i> Active
                        </span>
                        {% else %}
                        <span class="badge badge-gray">
                            <i class="fas fa-times-circle"></i> Inactive
                        </span>
                        {% endif %}
                    </td>
                    <td class="text-right">
                        <a href="{% url 'administration:position_edit' position.pk %}" class="action-btn">
                            <i class="fas fa-edit"></i>
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr id="emptyState">
                    <td colspan="5" class="empty-state-container">
                        <div class="empty-state-content">
                            <div class="empty-state-icon">
                                <i class="fas fa-chair"></i>
                            </div>
                            <div>
                                <h3 class="empty-state-title">No positions found</h3>
                                <p class="empty-state-description">Create positions for candidates to run for.</p>
                                <a href="{% url 'administration:position_create' %}" class="btn-primary">
                                    <i class="fas fa-plus"></i> New Position
                                </a>
                            </div>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                <!-- Hidden empty state for search results -->
                <tr id="noResults" style="display: none;">
                    <td colspan="5" class="no-results-container">
                        <i class="fas fa-search no-results-icon"></i>
                        No positions match your search.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>


{% endblock %}

{% block extra_js %}
<script src="{% static 'administration/js/admin_lists.js' %}"></script>
{% endblock %}